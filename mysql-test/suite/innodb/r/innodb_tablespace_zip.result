SET default_storage_engine=InnoDB;
SET GLOBAL innodb_file_per_table=ON;
SET SESSION innodb_strict_mode = ON;
#
# CREATE TEMPORARY compressed TABLE with DATA DIRECTORY is rejected in strict mode.
#
CREATE TEMPORARY TABLE t1 (a int KEY, b text) engine=InnoDB row_format=compressed DATA DIRECTORY='MYSQL_TMP_DIR/alt_dir';
ERROR HY000: CREATE TEMPORARY TABLE is not allowed with ROW_FORMAT=COMPRESSED or KEY_BLOCK_SIZE.
SHOW WARNINGS;
Level	Code	Message
Error	4047	CREATE TEMPORARY TABLE is not allowed with ROW_FORMAT=COMPRESSED or KEY_BLOCK_SIZE.
Warning	1030	Got error 140 "Wrong create options" from storage engine InnoDB
SET SESSION innodb_strict_mode = OFF;
# DATA DIRECTORY is ignored in CREATE TEMPORARY compressed TABLE in non-strict mode.
CREATE TEMPORARY TABLE t1 (a int KEY, b text) engine=InnoDB row_format=compressed DATA DIRECTORY='MYSQL_TMP_DIR/alt_dir';
Warnings:
Warning	1478	InnoDB: ROW_FORMAT=COMPRESSED is ignored for TEMPORARY TABLE.
Warning	1478	InnoDB: assuming ROW_FORMAT=DYNAMIC.
Warning	1478	InnoDB: DATA DIRECTORY cannot be used for TEMPORARY tables.
Warning	1618	<DATA DIRECTORY> option ignored
SHOW CREATE TABLE t1;
Table	Create Table
t1	CREATE TEMPORARY TABLE `t1` (
  `a` int(11) NOT NULL,
  `b` text DEFAULT NULL,
  PRIMARY KEY (`a`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 ROW_FORMAT=COMPRESSED
DROP TABLE t1;
#
# Cleanup
#
