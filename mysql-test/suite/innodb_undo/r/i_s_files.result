#
# WL7943 Implement INFORMATION_SCHEMA.FILES
#
SET default_storage_engine=InnoDB;
CREATE TABLE t1 (a serial, b text, c text);
#
# Populate t1 with about 3MB of data
#
CREATE PROCEDURE populate_t1()
BEGIN
DECLARE i INT DEFAULT 1;
while (i <= 6000) DO
INSERT INTO t1 (b,c) VALUES (repeat('b', 250), repeat('c', 250));
SET i = i + 1;
END WHILE;
END |
BEGIN;
CALL populate_t1();
FLUSH TABLE t1;
#
# Populate t1 with another 3MB of data
#
CALL populate_t1();
FLUSH TABLE t1;
#
# Delete the half of the records.
#
DELETE FROM t1 WHERE a % 2 = 1;
FLUSH TABLE t1;
#
# Cleanup
#
DROP TABLE t1;
DROP PROCEDURE populate_t1;
